graph TD
    A[开始: 问题理解与定义]

    subgraph 第一步: 基础模型构建
        B1("
        <b>1.1 坐标系与实体建模</b><br/>
        - 建立三维直角坐标系 (原点: 假目标)<br/>
        - <b>真目标:</b> 圆柱体, 数学表达式: $x^2 + (y-200)^2 \le 7^2$, $0 \le z \le 10$<br/>
        - <b>烟幕云团:</b> 球体, 数学表达式: $||\vec{P} - \vec{P}_{cloud\_center}(t)|| \le 10$
        ")
        B2("
        <b>1.2 运动学模型 (时间 t 从0开始)</b><br/>
        - <b>导弹 M(t):</b> $\vec{P}_{M}(t) = \vec{P}_{M}(0) + \vec{v}_{M} \cdot t$<br/>
        - <b>无人机 FY(t):</b> $\vec{P}_{FY}(t) = \vec{P}_{FY}(0) + \vec{v}_{FY} \cdot t$<br/>
        - <b>烟幕弹 Grenade(t):</b> $\vec{P}_{G}(t) = \vec{P}_{drop} + \vec{v}_{drop}(t-t_{drop}) + \frac{1}{2}\vec{g}(t-t_{drop})^2$<br/>
        - <b>烟幕云团中心 CloudCenter(t):</b> $\vec{P}_{CC}(t) = \vec{P}_{detonate} - (0,0,3) \cdot (t-t_{detonate})$
        ")
        B3("
        <b>1.3 关键判定条件: 有效遮蔽 (Shielding)</b><br/>
        - <b>时间窗口:</b> $t \in [t_{detonate}, t_{detonate} + 20s]$<br/>
        - <b>几何判定:</b> 从导弹位置到真目标任意点的连线段, 是否与烟幕球体相交<br/>
        - <b>简化判定:</b> 烟幕云团中心到导弹视线(LOS)的距离 $d \le 10m$<br/>
        - <b>遮蔽函数:</b> $S(t) = 1$ (遮蔽), $S(t) = 0$ (未遮蔽)
        ")
    end
    
    C{第二步: 逐个问题求解}

    subgraph " "
        Q1("
        <b>问题 1: 固定策略下的遮蔽时长计算 (模型验证)</b><br/>
        - <b>输入:</b> FY1速度, $t_{drop}$, $t_{detonate}$ 均固定<br/>
        - <b>方法:</b> 按时间步进仿真, 累加满足遮蔽条件的时长
        ")
        Q2("
        <b>问题 2: 单弹最优策略 (单目标优化)</b><br/>
        - <b>目标:</b> $\max \int S(t) dt$<br/>
        - <b>变量:</b> FY1的($v, \theta$), 弹药的($t_{drop}, t_{detonate}$)<br/>
        - <b>方法:</b> 智能优化算法 (遗传/粒子群等)
        ")
        Q3("
        <b>问题 3: 单无人机多弹最优策略 (约束优化)</b><br/>
        - <b>目标:</b> $\max \int \max(S_1, S_2, S_3) dt$ (并集)<br/>
        - <b>变量:</b> FY1策略 + 3组弹药策略<br/>
        - <b>约束:</b> $t_{drop, i+1} - t_{drop, i} \ge 1s$
        ")
        Q4("
        <b>问题 4: 多无人机协同最优策略 (多主体优化)</b><br/>
        - <b>目标:</b> 遮蔽时间并集最大化<br/>
        - <b>变量:</b> 3架无人机各自的飞行和弹药策略<br/>
        - <b>方法:</b> 高维全局优化
        ")
        Q5("
        <b>问题 5: 复杂场景综合最优策略 (分配+优化)</b><br/>
        - <b>分层问题:</b> 1. 任务分配 (谁防谁) 2. 策略优化<br/>
        - <b>目标:</b> 对所有导弹的总遮蔽时间最大化<br/>
        - <b>变量:</b> 分配方案 + 所有无人机/弹药策略<br/>
        - <b>方法:</b> 启发式分配 + 协同优化 / 混合整数规划
        ")
    end
    
    D[结果与分析]
    E[结束: 结果汇总与论文撰写]

    A --> B1
    B1 --> B2 --> B3
    B3 --> C
    C --> Q1
    C --> Q2
    C --> Q3
    C --> Q4
    C --> Q5
    
    Q1 --> D
    Q2 --> D
    Q3 --> D
    Q4 --> D
    Q5 --> D

    D --> E